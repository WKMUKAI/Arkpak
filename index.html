<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ARK_PAK_ | 03 Review Quote</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --g: #00a651; --b: #111; --w: #fff; --y: #ffed00; --grey: #f9f9f9; --err: #ff4444; }
    * { box-sizing: border-box; font-family: 'Quicksand', sans-serif; outline: none; }
    body { margin: 0; background: var(--w); color: var(--b); line-height: 1.6; padding-bottom: 50px; }
    .promo-bar { background: var(--y); text-align: center; padding: 10px; font-weight: 800; letter-spacing: 1px; font-size: 14px; }
    nav { padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; position: sticky; top: 0; background: var(--w); z-index: 100; }
    .logo { font-weight: 700; font-size: 1.4rem; letter-spacing: -1px; } .logo span { color: var(--g); }
    .phase-badge { background: var(--g); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: 700; text-transform: uppercase; }
    .config-card { max-width: 700px; margin: 30px auto; background: var(--grey); border-radius: 30px; padding: 30px; border: 2px solid #f0f0f0; box-shadow: 0 5px 20px rgba(0,0,0,.05); }
    h3 { margin-top: 0; font-size: 1.4rem; border-bottom: 2px solid #ddd; padding-bottom: 10px; margin-bottom: 20px; }
    .summary-box { background: #fff; padding: 20px; border-radius: 15px; border: 1px dashed #aaa; margin-bottom: 20px; font-size: 14px; } .summary-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 8px 0; } .summary-row:last-child { border-bottom: none; }
    .price-display-container { background: var(--y); padding: 20px; border-radius: 20px; margin-top: 30px; text-align: center; border: 3px solid var(--b); }
    .price-value { font-size: 2.5rem; font-weight: 800; line-height: 1; } .price-sub { font-size: 12px; font-weight: 700; opacity: .8; margin-top: 5px; }
    .btn { background: var(--g); color: var(--w); padding: 16px; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; width: 100%; font-size: 16px; margin-top: 20px; transition: transform .1s; }
    .btn:active { transform: scale(.98); } .btn-secondary { background: var(--b); margin-top: 10px; font-size: 14px; padding: 12px; }
  </style>
</head>
<body>

<div class="promo-bar">üöÄ PHASE 1 ‚Äì HK & KOWLOON FREE SHIPPING</div>
<nav><div class="logo">ARK_PAK_<span>_</span></div><span class="phase-badge">PHASE 1</span></nav>

<div class="config-card">
  <h3>03 Review Quote</h3>
  <div id="summary" class="summary-box"></div>
  <div class="price-display-container">
    <div class="price-value" id="finalTotal">$0</div>
    <div class="price-sub">Payable via PayMe / Bank Transfer</div>
  </div>
  <button class="btn" style="background:#25D366" onclick="sendOrder('whatsapp')">Confirm via WhatsApp üí¨</button>
  <button class="btn btn-secondary" onclick="sendOrder('email')">Send via Email ‚úâÔ∏è</button>
  <a href="specs.html" class="btn btn-outline">‚Üê Edit</a>
</div>

<footer>ARK_PAK_ STUDIO // 2026 // Hong Kong</footer>

<script>
/* ----------  BUILD RECAP ON LOAD  ---------- */
window.addEventListener('load', () => {
  const name = localStorage.getItem('custName') || 'Not provided';
  const tel  = localStorage.getItem('custTel')  || 'Not provided';
  const email = localStorage.getItem('custEmail') || 'Not provided';
  const addr = localStorage.getItem('custAddr') || 'Not provided';
  const region = localStorage.getItem('custRegion') || 'Not provided';
  const note   = localStorage.getItem('custNote')   || 'None';

  const prod = localStorage.getItem('prodType') || 'cover';
  const wall = localStorage.getItem('wallThick') || '1';
  const fit  = localStorage.getItem('fitType')  || 'standard';
  const gap  = localStorage.getItem('customGap') || '0';
  const qty  = localStorage.getItem('qty') || '1';

  let gapText = '';
  if (fit === 'standard') gapText = '3 cm (bubble-wrap)';
  else if (fit === 'ukon') gapText = 'Snug (ukon)';
  else gapText = gap + ' cm';

  let items = '';
  if (prod === 'ukon') {
    items = `<div class="summary-row"><span>Ukon Bag</span><span>Qty: ${qty}</span></div>`;
  } else {
    const boxes = JSON.parse(localStorage.getItem('boxes') || '[]');
    boxes.forEach((b, i) => {
      items += `<div class="summary-row"><span>Box #${i + 1} (${b.w}√ó${b.h}√ó${b.d} cm)</span><span>Qty: ${qty}</span></div>`;
    });
  }

  const total = localStorage.getItem('totalPrice') || '0';

  document.getElementById('summary').innerHTML = `
    <div style="margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee">
      <strong>Customer:</strong> ${name}<br><strong>Phone:</strong> ${tel}<br><strong>Email:</strong> ${email}<br><strong>Address:</strong> ${addr}<br><strong>Region:</strong> ${region}<br><strong>Notes:</strong> ${note}
    </div>
    <div class="summary-row"><span>Product:</span><span>${prod === 'ukon' ? 'Ukon Bag' : prod === 'slide' ? 'Slide Box' : 'Cover Box'}</span></div>
    <div class="summary-row"><span>Wall Thickness:</span><span>${wall === '1.2' ? '2 Layers (+20%)' : wall === 'custom' ? 'Custom Quote' : '1 Layer (Std)'}</span></div>
    <div class="summary-row"><span>Inner Fit:</span><span>${gapText}</span></div>
    ${items}`;
  document.getElementById('finalTotal').innerText = '$' + total;
});

/* ----------  SEND ORDER (WhatsApp 55962339 + e-mail)  ---------- */
function sendOrder(method) {
    const name = localStorage.getItem('custName') || '';
    const tel  = localStorage.getItem('custTel')  || '';
    const email = localStorage.getItem('custEmail') || '';
    const addr = localStorage.getItem('custAddr') || '';
    const region = localStorage.getItem('custRegion') || '';
    const note   = localStorage.getItem('custNote')   || '';
    const total  = localStorage.getItem('totalPrice') || '0';

    const prod = localStorage.getItem('prodType') || 'cover';
    const wall = localStorage.getItem('wallThick') || '1';
    const fit  = localStorage.getItem('fitType')  || 'standard';
    const gap  = localStorage.getItem('customGap') || '0';
    const qty  = localStorage.getItem('qty') || '1';

    let gapText = '';
    if (fit === 'standard') gapText = '3 cm (bubble-wrap)';
    else if (fit === 'ukon') gapText = 'Snug (ukon)';
    else gapText = gap + ' cm';

    let items = '';
    if (prod === 'ukon') {
        items = `Ukon Bag (Qty:${qty})\n`;
    } else {
        const boxes = JSON.parse(localStorage.getItem('boxes') || '[]');
        boxes.forEach((b, i) => {
            items += `Box ${i + 1}: ${b.w}√ó${b.h}√ó${b.d}cm (Qty:${qty})\n`;
        });
    }

    const msg = `[NEW ORDER ‚Äì ARK_PAK]
---------------------
üë§ Name: ${name}
üìû Tel: ${tel}
‚úâÔ∏è Email: ${email}
üìç Address: ${addr}
üåç Region: ${region}
üìù Note: ${note}
---------------------
PRODUCT: ${prod === 'ukon' ? 'Ukon Bag' : prod === 'slide' ? 'Slide Box' : 'Cover Box'}
Wall: ${wall === '1.2' ? '2 Layers (+20%)' : wall === 'custom' ? 'Custom Quote' : '1 Layer (Std)'}
Fit: ${gapText}
${items}---------------------
üí∞ TOTAL: $${total}`.trim();
    if (method === 'whatsapp') window.open(`https://wa.me/55962339?text=${encodeURIComponent(msg)}`, '_blank');
    else window.location.href = `mailto:${email}?subject=New Order: ${name}&body=${encodeURIComponent(msg)}`;
}
</script>
</body>
</html>

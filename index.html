// ==========================================
// FILE: /App.tsx
// ==========================================

import { useState } from 'react';
import Navigation from './components/Navigation';
import HomePage from './components/HomePage';
import ProductsPage from './components/ProductsPage';
import OrderPage from './components/OrderPage';
import ContactPage from './components/ContactPage';

export type PageType = 'home' | 'products' | 'order' | 'contact';
export type ProductType = 'cover' | 'slide' | 'ukon';

export default function App() {
  const [currentPage, setCurrentPage] = useState<PageType>('home');
  const [selectedProduct, setSelectedProduct] = useState<ProductType>('cover');

  const handleSelectProduct = (product: ProductType) => {
    setSelectedProduct(product);
    setCurrentPage('order');
  };

  return (
    <div className="min-h-screen bg-white">
      {/* Promo Bar */}
      <div className="bg-[#ffed00] text-center py-3 px-4 font-bold text-sm tracking-wide">
        üöö HK DELIVERY ‚Äì Phase 1 Free delivery to HK and Kowloon.
      </div>

      {/* Navigation */}
      <Navigation currentPage={currentPage} onNavigate={setCurrentPage} />

      {/* Page Content */}
      <main>
        {currentPage === 'home' && <HomePage onNavigate={setCurrentPage} />}
        {currentPage === 'products' && <ProductsPage onSelectProduct={handleSelectProduct} />}
        {currentPage === 'order' && <OrderPage initialProduct={selectedProduct} />}
        {currentPage === 'contact' && <ContactPage />}
      </main>

      {/* Footer */}
      <footer className="text-center py-10 mt-16 border-t border-gray-200 text-xs text-gray-400">
        ARK_PAK_ STUDIO // 2026 // HONG KONG
      </footer>
    </div>
  );
}


// ==========================================
// FILE: /components/Navigation.tsx
// ==========================================

import { PageType } from '../App';

interface NavigationProps {
  currentPage: PageType;
  onNavigate: (page: PageType) => void;
}

export default function Navigation({ currentPage, onNavigate }: NavigationProps) {
  const navItems: { label: string; page: PageType }[] = [
    { label: 'About', page: 'home' },
    { label: 'Products', page: 'products' },
    { label: 'Contact', page: 'contact' },
  ];

  return (
    <nav className="sticky top-0 bg-white z-50 border-b border-gray-200 shadow-sm">
      <div className="px-6 md:px-10 py-4 flex justify-between items-center max-w-7xl mx-auto">
        {/* Logo */}
        <div
          className="text-2xl font-bold tracking-tight cursor-pointer hover:opacity-80 transition-opacity"
          onClick={() => onNavigate('home')}
        >
          ARK_PAK<span className="text-[#00a651]">_</span>
        </div>

        {/* Navigation Menu */}
        <div className="flex items-center gap-4 md:gap-8">
          {navItems.map((item) => (
            <button
              key={item.page}
              onClick={() => onNavigate(item.page)}
              className={`text-xs md:text-sm font-bold uppercase tracking-wide transition-colors ${
                currentPage === item.page
                  ? 'text-[#00a651]'
                  : 'text-gray-500 hover:text-[#00a651]'
              }`}
            >
              {item.label}
            </button>
          ))}
          <button
            onClick={() => onNavigate('order')}
            className="bg-black text-white px-5 py-2 rounded-full text-xs md:text-sm font-bold uppercase hover:bg-[#00a651] transition-colors"
          >
            Order Now
          </button>
        </div>
      </div>
    </nav>
  );
}


// ==========================================
// FILE: /components/HomePage.tsx
// ==========================================

import { PageType } from '../App';

interface HomePageProps {
  onNavigate: (page: PageType) => void;
}

export default function HomePage({ onNavigate }: HomePageProps) {
  return (
    <section className="py-12 md:py-20 animate-in fade-in duration-500">
      <div className="container max-w-6xl mx-auto px-6">
        {/* Hero Text */}
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 leading-tight">
            Japanese Precision.<br />Handcrafted in Hong Kong.
          </h1>
          <p className="text-gray-600 max-w-2xl mx-auto text-base md:text-lg">
            ARK_PAK_ brings museum-grade archival standards to the local art scene.
            Professional housing engineered for the pace of Hong Kong's art market.
          </p>
        </div>

        {/* Hero Video Placeholder */}
        <div className="max-w-4xl mx-auto mb-12">
          <div className="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl shadow-xl flex items-center justify-center">
            <div className="text-center text-gray-500">
              <div className="text-6xl mb-4">üñº</div>
              <div className="font-semibold text-lg">HERO VIDEO / IMAGE</div>
              <div className="text-sm mt-2 opacity-70">
                (Professional visuals coming soon)
              </div>
            </div>
          </div>
        </div>

        {/* Extended About Content */}
        <div className="max-w-4xl mx-auto mb-12 space-y-6 text-gray-700 leading-relaxed">
          <p className="text-center text-lg">
            <strong className="text-[#00a651]">ARK_PAK_</strong> is a specialized archival housing studio based in Hong Kong, 
            dedicated to protecting artworks with the same care and precision found in museums worldwide.
          </p>
          
          <div className="grid md:grid-cols-2 gap-8 mt-8">
            <div className="bg-gray-50 rounded-2xl p-6 border border-gray-200">
              <h3 className="text-xl font-bold mb-3 text-[#00a651]">Our Philosophy</h3>
              <p className="text-sm">
                We believe that proper archival housing shouldn't be a luxury reserved for institutions. 
                Every artwork deserves professional-grade protection, whether it's being stored, transported, 
                or prepared for a client handover. Our systems combine traditional Japanese craftsmanship 
                with modern materials science to deliver museum-quality housing that's accessible and practical 
                for Hong Kong's dynamic art community.
              </p>
            </div>
            
            <div className="bg-gray-50 rounded-2xl p-6 border border-gray-200">
              <h3 className="text-xl font-bold mb-3 text-[#00a651]">Why Choose Us?</h3>
              <p className="text-sm">
                Based in Hong Kong, we understand the unique challenges of our subtropical climate‚Äîhumidity, 
                temperature fluctuations, and space constraints. Our boxes are engineered specifically for 
                these conditions, using acid-free, lignin-free archival board that resists mould and moisture. 
                Whether you're a gallery preparing for Art Basel, a collector managing your collection, 
                or an artist storing works between exhibitions, we deliver housing solutions that protect your 
                investment for generations.
              </p>
            </div>
          </div>

          <div className="bg-gradient-to-r from-[#00a651]/5 to-[#ffed00]/10 rounded-2xl p-8 border border-[#00a651]/20 mt-8">
            <h3 className="text-2xl font-bold mb-4 text-center">What Makes ARK_PAK_ Different?</h3>
            <div className="grid md:grid-cols-3 gap-6 text-sm">
              <div>
                <div className="font-bold text-[#00a651] mb-2">üéØ Precision Fit</div>
                <p>Every box is made-to-order based on your exact specifications. No compromises, no "close enough."</p>
              </div>
              <div>
                <div className="font-bold text-[#00a651] mb-2">‚ö° Fast Turnaround</div>
                <p>We know art moves quickly in Hong Kong. Orders are typically ready within 5-7 business days.</p>
              </div>
              <div>
                <div className="font-bold text-[#00a651] mb-2">ü§ù Personal Service</div>
                <p>Direct communication with our studio. No middlemen, no automated responses‚Äîjust expert guidance.</p>
              </div>
            </div>
          </div>

          <p className="text-center text-sm text-gray-600 italic mt-8">
            From independent artists to major galleries, ARK_PAK_ has become the trusted choice 
            for archival housing across Hong Kong's art community. Join us in preserving what matters.
          </p>
        </div>

        {/* Trust Line */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto mb-12">
          {[
            { icon: 'üçÑ', title: 'ANTI-MOULD', subtitle: 'Archival' },
            { icon: 'üíß', title: 'WATER RES.', subtitle: 'High Density' },
            { icon: '‚ôªÔ∏è', title: 'RECYCLE', subtitle: 'Eco Core' },
            { icon: 'üöö', title: 'HK DELIVERY', subtitle: 'PHASE 1 FREE' },
          ].map((item, idx) => (
            <div key={idx} className="text-center">
              <div className="text-3xl mb-2">{item.icon}</div>
              <div className="text-xs font-bold text-gray-700">{item.title}</div>
              <div className="text-sm font-bold text-[#00a651] mt-1">{item.subtitle}</div>
            </div>
          ))}
        </div>

        {/* CTA Button */}
        <div className="text-center">
          <button
            onClick={() => onNavigate('products')}
            className="bg-[#00a651] text-white px-12 py-4 rounded-full font-bold text-lg hover:bg-[#008f46] transition-all hover:scale-105 shadow-lg"
          >
            View Products
          </button>
        </div>
      </div>
    </section>
  );
}


// ==========================================
// FILE: /components/ProductsPage.tsx
// ==========================================

import { ProductType } from '../App';

interface ProductsPageProps {
  onSelectProduct: (product: ProductType) => void;
}

const products = [
  {
    id: 'ukon' as ProductType,
    icon: 'üëò',
    name: 'The Japanese Ukon Bag',
    tagline: 'The Essential First Layer.',
    description:
      'Ukon (Japanese for Turmeric) is a traditional natural insect repellent. Our bags are crafted from a premium cotton-poly blend, traditionally turmeric-dyed to achieve their signature yellow hue and protective properties. The addition of polyester enhances durability, preventing shrinkage and ensuring it withstands frequent repacking. Designed to shield delicate surfaces from abrasions, the fabric allows for a smooth "glide"‚Äîmaking it effortless to pull work out of a box or hand over to a client.',
  },
  {
    id: 'slide' as ProductType,
    icon: 'üìÇ',
    name: 'The Slide Box',
    tagline: 'Precision & Presentation.',
    description:
      'The side-loading slipcase is engineered for flat works, prints, and galleries requiring frequent viewing access. It is the ultimate logistical tool‚Äîsuper easy to unpack and repack, making it the perfect housing for client handovers. Every corner is reinforced with industrial-grade archival tape, and the system features a signature rope-lock closure to ensure the work remains secure during transit.',
  },
  {
    id: 'cover' as ProductType,
    icon: 'üì¶',
    name: 'The Cover Box',
    tagline: 'Structural Strength & Scalability.',
    description:
      'A heavy-duty, top-loading system featuring a reinforced lid. Optimized for deep canvases and framed works, the Cover Box is engineered for extreme durability. By increasing the wall thickness beyond a double-layer configuration, it transforms into a high-performance "Studio Crate"‚Äîa lightweight, rigid alternative to traditional timber crates. It offers the structural integrity needed for transport without the bulk, weight, or disposal challenges of wood.',
  },
];

export default function ProductsPage({ onSelectProduct }: ProductsPageProps) {
  return (
    <section className="py-12 md:py-20 animate-in fade-in duration-500">
      <div className="container max-w-6xl mx-auto px-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-3">Our Systems</h2>
        <p className="text-center text-gray-500 mb-12">
          Select a housing type to begin configuration.
        </p>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {products.map((product) => (
            <div
              key={product.id}
              className="bg-gray-50 rounded-3xl overflow-hidden border border-gray-200 hover:shadow-xl hover:-translate-y-2 transition-all duration-300"
            >
              {/* Product Image */}
              <div className="h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-6xl relative">
                {product.icon}
                <div className="absolute bottom-2 left-1/2 -translate-x-1/2 bg-white/95 px-3 py-1 rounded-lg text-[9px] font-semibold text-gray-600 tracking-wider">
                  PRODUCT PHOTO COMING SOON
                </div>
              </div>

              {/* Product Info */}
              <div className="p-6 text-center">
                <h3 className="text-xl font-bold mb-2">{product.name}</h3>
                <p className="text-sm font-semibold text-[#00a651] mb-3">
                  {product.tagline}
                </p>
                <p className="text-xs text-gray-600 leading-relaxed mb-6 line-clamp-6">
                  {product.description}
                </p>
                <button
                  onClick={() => onSelectProduct(product.id)}
                  className="w-full bg-[#00a651] text-white py-3 rounded-full font-bold hover:bg-[#008f46] transition-colors"
                >
                  Configure
                </button>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}


// ==========================================
// FILE: /components/OrderPage.tsx
// ==========================================

import { useState, useEffect } from 'react';
import { ProductType } from '../App';
import BoxCanvas from './BoxCanvas';

interface OrderPageProps {
  initialProduct: ProductType;
}

interface BoxConfig {
  id: string;
  type: ProductType;
  width: number;
  height: number;
  depth: number;
  quantity: number;
}

type FitType = 'standard' | 'ukon' | 'custom';
type WallThickness = '1' | '1.2' | 'custom';
type Region = 'hk-kowloon' | 'new-territories' | 'islands';

export default function OrderPage({ initialProduct }: OrderPageProps) {
  const [step, setStep] = useState(1);
  const [productType, setProductType] = useState<ProductType>(initialProduct);
  const [fitType, setFitType] = useState<FitType>('standard');
  const [customGap, setCustomGap] = useState(1.5);
  const [wallThickness, setWallThickness] = useState<WallThickness>('1');
  const [boxes, setBoxes] = useState<BoxConfig[]>([
    { id: '1', type: 'cover', width: 0, height: 0, depth: 0, quantity: 1 },
  ]);

  // Contact info
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');
  const [email, setEmail] = useState('');
  const [address, setAddress] = useState('');
  const [region, setRegion] = useState<Region>('hk-kowloon');
  const [notes, setNotes] = useState('');

  // Pricing
  const [totalPrice, setTotalPrice] = useState(0);
  const [itemsPrice, setItemsPrice] = useState(0);
  const [deliveryFee, setDeliveryFee] = useState(0);
  const [needsCustomQuote, setNeedsCustomQuote] = useState(false);

  // Calculate price whenever relevant state changes
  useEffect(() => {
    calculatePrice();
  }, [boxes, wallThickness, fitType, customGap, region, productType]);

  const calculatePrice = () => {
    // Check for custom quote conditions
    if (wallThickness === 'custom' || region === 'islands') {
      setNeedsCustomQuote(true);
      return;
    }

    setNeedsCustomQuote(false);

    let itemsTotal = 0;

    // Calculate fit cost
    let fitCost = 0;
    if (fitType === 'ukon') {
      fitCost = 85;
    } else if (fitType === 'custom') {
      fitCost = customGap * 10;
    }

    // Calculate box costs
    boxes.forEach((box) => {
      // Skip boxes with invalid dimensions
      if (box.width <= 0 || box.height <= 0) {
        return;
      }

      const perimeter = (box.width + box.height) * 2;
      let basePrice = 0;

      if (perimeter < 100) basePrice = 150;
      else if (perimeter < 200) basePrice = 280;
      else if (perimeter < 300) basePrice = 450;
      else basePrice = 600;

      // Adjust for box type
      if (box.type === 'slide') basePrice *= 1.1;

      // Adjust for wall thickness
      if (wallThickness === '1.2') basePrice *= 1.2;

      // Add fit cost and multiply by quantity
      itemsTotal += (basePrice + fitCost) * box.quantity;
    });

    setItemsPrice(itemsTotal);

    // Calculate delivery
    let delivery = 0;
    if (region === 'new-territories') delivery = 150;

    setDeliveryFee(delivery);
    setTotalPrice(itemsTotal + delivery);
  };

  const addBox = () => {
    const newId = (Math.max(...boxes.map((b) => parseInt(b.id)), 0) + 1).toString();
    setBoxes([
      ...boxes,
      { id: newId, type: productType, width: 0, height: 0, depth: 0, quantity: 1 },
    ]);
  };

  const removeBox = (id: string) => {
    if (boxes.length > 1) {
      setBoxes(boxes.filter((b) => b.id !== id));
    }
  };

  const updateBox = (id: string, updates: Partial<BoxConfig>) => {
    setBoxes(boxes.map((b) => (b.id === id ? { ...b, ...updates } : b)));
  };

  const clampValue = (value: number, max = 120) => {
    return Math.min(Math.max(0, value), max);
  };

  const getGapValue = () => {
    if (fitType === 'standard') return 1.5;
    if (fitType === 'ukon') return 0;
    return customGap;
  };

  const handleNextStep = () => {
    if (step === 1) {
      setStep(2);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    } else if (step === 2) {
      if (!name.trim() || !phone.trim()) {
        alert('Please enter your name and phone number');
        return;
      }
      setStep(3);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  };

  const handleSendOrder = (method: 'whatsapp' | 'email') => {
    const orderDetails = `
ARK_PAK_ ORDER REQUEST

CUSTOMER INFORMATION:
Name: ${name}
Phone: ${phone}
Email: ${email}
Address: ${address}
Region: ${region === 'hk-kowloon' ? 'HK & Kowloon' : region === 'new-territories' ? 'New Territories' : 'Remote Islands'}
Notes: ${notes}

PRODUCT SPECIFICATIONS:
Wall Thickness: ${wallThickness === '1' ? '1 Layer (Standard)' : wallThickness === '1.2' ? '2 Layers (Extra Rigid)' : 'Custom (3+ Layers)'}
Fit Type: ${fitType === 'standard' ? 'Standard (1.5cm gap)' : fitType === 'ukon' ? 'Ukon Snug (0cm gap)' : `Custom (${customGap}cm gap)`}

BOXES:
${boxes.map((box, i) => `${i + 1}. ${box.type.toUpperCase()} Box - ${box.width}√ó${box.height}√ó${box.depth}cm - Qty: ${box.quantity}`).join('\n')}

PRICING:
Items Total: $${Math.round(itemsPrice)}
Delivery: ${deliveryFee === 0 ? 'FREE' : `$${deliveryFee}`}
TOTAL: $${Math.round(totalPrice)}
    `.trim();

    if (method === 'whatsapp') {
      window.open(
        `https://wa.me/85255962339?text=${encodeURIComponent(orderDetails)}`,
        '_blank'
      );
    } else {
      window.location.href = `mailto:studio@arkpak.hk?subject=Order Request - ${name}&body=${encodeURIComponent(orderDetails)}`;
    }
  };

  return (
    <section className="py-12 md:py-20 animate-in fade-in duration-500">
      <div className="container max-w-4xl mx-auto px-6">
        {/* Step 1: Specifications */}
        {step === 1 && (
          <div className="bg-gray-50 rounded-3xl p-8 border-2 border-gray-200 shadow-lg">
            <h3 className="text-2xl font-bold mb-6 pb-4 border-b-2 border-gray-300">
              01 Specs & Inner Fit
            </h3>

            {/* Canvas Visualization */}
            {boxes[0] && boxes[0].width > 0 && boxes[0].height > 0 && (
              <BoxCanvas
                artworkWidth={boxes[0].width}
                artworkHeight={boxes[0].height}
                gap={getGapValue()}
              />
            )}

            {/* Product Type */}
            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mt-6 mb-2">
              Product Type
            </label>
            <select
              value={productType}
              onChange={(e) => setProductType(e.target.value as ProductType)}
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
            >
              <option value="cover">Cover Box</option>
              <option value="slide">Slide Box</option>
              <option value="ukon">Ukon Bag</option>
            </select>

            {/* Inner Fit */}
            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mt-6 mb-2">
              Inner Fit (Determine Gap)
            </label>
            <select
              value={fitType}
              onChange={(e) => setFitType(e.target.value as FitType)}
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
            >
              <option value="standard">Standard (1.5 cm Gap for Bubble Wrap)</option>
              <option value="ukon">Ukon Snug (0 cm Gap)</option>
              <option value="custom">Custom Gap</option>
            </select>

            {/* Custom Gap Input */}
            {fitType === 'custom' && (
              <div className="mt-4">
                <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
                  Custom Gap (cm)
                </label>
                <input
                  type="number"
                  value={customGap}
                  onChange={(e) => setCustomGap(parseFloat(e.target.value) || 0)}
                  step="0.5"
                  min="0"
                  max="10"
                  className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
                />
              </div>
            )}

            {/* Wall Thickness */}
            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mt-6 mb-2">
              Wall Thickness
            </label>
            <select
              value={wallThickness}
              onChange={(e) => setWallThickness(e.target.value as WallThickness)}
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
            >
              <option value="1">1 Layer (Standard Rigid)</option>
              <option value="1.2">2 Layers (Extra Rigid +20%)</option>
              <option value="custom">3+ Layers (Custom Quote)</option>
            </select>

            {/* Boxes List */}
            <div className="mt-8 space-y-4">
              {boxes.map((box, index) => (
                <div
                  key={box.id}
                  className="bg-white border border-gray-200 rounded-2xl p-6 relative"
                >
                  {boxes.length > 1 && (
                    <button
                      onClick={() => removeBox(box.id)}
                      className="absolute top-4 right-4 text-red-500 text-xs underline hover:text-red-700"
                    >
                      REMOVE
                    </button>
                  )}

                  <div className="font-semibold text-sm mb-4 text-gray-700">
                    Box #{index + 1}
                  </div>

                  <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
                    Artwork Dimensions (cm){' '}
                    <span className="text-red-500 ml-1">MAX 120</span>
                  </label>
                  <div className="grid grid-cols-3 gap-3">
                    <div>
                      <input
                        type="number"
                        value={box.width || ''}
                        onChange={(e) =>
                          updateBox(box.id, {
                            width: clampValue(parseFloat(e.target.value) || 0),
                          })
                        }
                        max={120}
                        placeholder="W"
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl text-center focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
                      />
                    </div>
                    <div>
                      <input
                        type="number"
                        value={box.height || ''}
                        onChange={(e) =>
                          updateBox(box.id, {
                            height: clampValue(parseFloat(e.target.value) || 0),
                          })
                        }
                        max={120}
                        placeholder="H"
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl text-center focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
                      />
                    </div>
                    <div>
                      <input
                        type="number"
                        value={box.depth || ''}
                        onChange={(e) =>
                          updateBox(box.id, {
                            depth: clampValue(parseFloat(e.target.value) || 0),
                          })
                        }
                        max={120}
                        placeholder="D"
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl text-center focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
                      />
                    </div>
                  </div>

                  <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mt-4 mb-2">
                    Quantity
                  </label>
                  <input
                    type="number"
                    value={box.quantity}
                    onChange={(e) =>
                      updateBox(box.id, {
                        quantity: Math.max(1, parseInt(e.target.value) || 1),
                      })
                    }
                    min={1}
                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all"
                  />
                </div>
              ))}
            </div>

            <button
              onClick={addBox}
              className="w-full mt-4 py-3 border-2 border-black text-black rounded-full font-bold hover:bg-black hover:text-white transition-colors"
            >
              + Add Another Size
            </button>

            {/* Price Display */}
            {!needsCustomQuote ? (
              <div className="bg-[#ffed00] rounded-2xl p-6 mt-8 text-center border-3 border-black">
                <div className="text-4xl font-black">${Math.round(totalPrice)}</div>
                <div className="text-xs font-bold mt-2 opacity-80">
                  {boxes.length} size(s) | {deliveryFee === 0 ? 'Free Shipping' : `+$${deliveryFee} Shipping`}
                </div>
              </div>
            ) : (
              <div className="bg-[#ffed00] rounded-2xl p-6 mt-8 text-center border-3 border-black">
                <div className="text-3xl font-black mb-3">Custom Quote</div>
                <a
                  href="mailto:studio@arkpak.hk?subject=Custom Quote Request"
                  className="inline-block bg-[#25D366] text-white px-8 py-3 rounded-full font-bold hover:bg-[#20bd5a] transition-colors"
                >
                  Contact Studio ‚úâÔ∏è
                </a>
              </div>
            )}

            <button
              onClick={handleNextStep}
              className="w-full mt-6 bg-[#00a651] text-white py-4 rounded-full font-bold text-lg hover:bg-[#008f46] transition-colors"
            >
              Next: Logistics ‚Üí
            </button>
          </div>
        )}

        {/* Step 2: Logistics */}
        {step === 2 && (
          <div className="bg-gray-50 rounded-3xl p-8 border-2 border-gray-200 shadow-lg">
            <h3 className="text-2xl font-bold mb-6 pb-4 border-b-2 border-gray-300">
              02 Logistics
            </h3>

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              Contact Name *
            </label>
            <input
              type="text"
              value={name}
              onChange={(e) => setName(e.target.value)}
              placeholder="Your Name"
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-4"
            />

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              WhatsApp Number *
            </label>
            <input
              type="tel"
              value={phone}
              onChange={(e) => setPhone(e.target.value)}
              placeholder="+852 1234 5678"
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-4"
            />

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              Email Address
            </label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="you@example.com"
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-4"
            />

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              Delivery Address
            </label>
            <input
              type="text"
              value={address}
              onChange={(e) => setAddress(e.target.value)}
              placeholder="Enter your address"
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-4"
            />

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              Region (Phase 1 ‚Äì Free Delivery)
            </label>
            <select
              value={region}
              onChange={(e) => setRegion(e.target.value as Region)}
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-4"
            >
              <option value="hk-kowloon">HK and Kowloon (Free)</option>
              <option value="new-territories">New Territories (+$150)</option>
              <option value="islands">Remote Islands (Quote)</option>
            </select>

            <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-2">
              Delivery Notes
            </label>
            <textarea
              value={notes}
              onChange={(e) => setNotes(e.target.value)}
              rows={3}
              placeholder="Stairs, concierge, gate code..."
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all mb-6"
            />

            <button
              onClick={handleNextStep}
              className="w-full bg-[#00a651] text-white py-4 rounded-full font-bold text-lg hover:bg-[#008f46] transition-colors"
            >
              Review Quote ‚Üí
            </button>
            <button
              onClick={() => setStep(1)}
              className="w-full mt-3 bg-black text-white py-3 rounded-full font-bold hover:bg-gray-800 transition-colors"
            >
              ‚Üê Back
            </button>
          </div>
        )}

        {/* Step 3: Review & Send */}
        {step === 3 && (
          <div className="bg-gray-50 rounded-3xl p-8 border-2 border-gray-200 shadow-lg">
            <h3 className="text-2xl font-bold mb-6 pb-4 border-b-2 border-gray-300">
              03 Review Quote
            </h3>

            {/* Summary */}
            <div className="bg-white border border-dashed border-gray-400 rounded-2xl p-6 mb-6">
              <div className="pb-4 mb-4 border-b border-gray-200">
                <div className="font-bold text-lg">{name}</div>
                <div className="text-sm text-gray-600 mt-1">{phone}</div>
                {email && <div className="text-sm text-gray-600">{email}</div>}
                {address && <div className="text-sm text-gray-600 mt-2">{address}</div>}
                <div className="text-sm text-gray-600">
                  ({region === 'hk-kowloon' ? 'HK & Kowloon' : region === 'new-territories' ? 'New Territories' : 'Remote Islands'})
                </div>
              </div>

              <div className="space-y-2 text-sm">
                <div className="flex justify-between py-2 border-b border-gray-100">
                  <span className="font-semibold">Wall Thickness:</span>
                  <span>
                    {wallThickness === '1' ? '1 Layer' : wallThickness === '1.2' ? '2 Layers' : 'Custom'}
                  </span>
                </div>
                <div className="flex justify-between py-2 border-b border-gray-100">
                  <span className="font-semibold">Fit Type:</span>
                  <span>
                    {fitType === 'standard' ? 'Standard (1.5cm)' : fitType === 'ukon' ? 'Ukon Snug (0cm)' : `Custom (${customGap}cm)`}
                  </span>
                </div>
                {boxes.map((box, i) => (
                  <div key={box.id} className="py-2 border-b border-gray-100">
                    <div className="flex justify-between">
                      <span className="font-semibold">Box #{i + 1}:</span>
                      <span>{box.type.toUpperCase()}</span>
                    </div>
                    <div className="text-xs text-gray-600 mt-1">
                      {box.width} √ó {box.height} √ó {box.depth} cm | Qty: {box.quantity}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Final Price */}
            <div className="bg-[#ffed00] rounded-2xl p-6 text-center border-3 border-black mb-6">
              <div className="text-4xl font-black">${Math.round(totalPrice)}</div>
              <div className="text-xs font-bold mt-2 opacity-80">
                Payable via PayMe / Bank Transfer
              </div>
            </div>

            <button
              onClick={() => handleSendOrder('whatsapp')}
              className="w-full bg-[#25D366] text-white py-4 rounded-full font-bold text-lg hover:bg-[#20bd5a] transition-colors mb-3"
            >
              Confirm via WhatsApp üí¨
            </button>
            <button
              onClick={() => handleSendOrder('email')}
              className="w-full bg-black text-white py-3 rounded-full font-bold hover:bg-gray-800 transition-colors mb-3"
            >
              Send via Email ‚úâÔ∏è
            </button>
            <button
              onClick={() => setStep(2)}
              className="w-full border-2 border-black text-black py-3 rounded-full font-bold hover:bg-black hover:text-white transition-colors"
            >
              ‚Üê Edit
            </button>
          </div>
        )}
      </div>
    </section>
  );
}


// ==========================================
// FILE: /components/BoxCanvas.tsx
// ==========================================

import { useEffect, useRef } from 'react';

interface BoxCanvasProps {
  artworkWidth: number;
  artworkHeight: number;
  gap: number;
}

export default function BoxCanvas({ artworkWidth, artworkHeight, gap }: BoxCanvasProps) {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    // Set canvas size
    const container = canvas.parentElement;
    if (container) {
      canvas.width = container.offsetWidth;
      canvas.height = 250;
    }

    const cw = canvas.width;
    const ch = canvas.height;

    // Clear canvas
    ctx.clearRect(0, 0, cw, ch);

    // Don't draw if dimensions are invalid
    if (artworkWidth <= 0 || artworkHeight <= 0) {
      ctx.fillStyle = '#999';
      ctx.font = 'bold 14px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Enter artwork dimensions to see preview', cw / 2, ch / 2);
      return;
    }

    // Calculate dimensions
    const totalW = artworkWidth + gap * 2;
    const totalH = artworkHeight + gap * 2;

    // Scale to fit canvas
    const scale = (Math.min(cw, ch) * 0.6) / Math.max(totalW, totalH);
    const sw = artworkWidth * scale;
    const sh = artworkHeight * scale;
    const sg = gap * scale;

    const cx = cw / 2;
    const cy = ch / 2;

    // Draw artwork (dashed rectangle)
    ctx.save();
    ctx.setLineDash([5, 5]);
    ctx.strokeStyle = '#999';
    ctx.lineWidth = 2;
    ctx.strokeRect(cx - sw / 2, cy - sh / 2, sw, sh);
    ctx.restore();

    // Draw box (solid green rectangle)
    ctx.strokeStyle = '#00a651';
    ctx.lineWidth = 3;
    ctx.strokeRect(cx - (sw / 2 + sg), cy - (sh / 2 + sg), sw + sg * 2, sh + sg * 2);

    // Draw labels
    ctx.font = 'bold 13px sans-serif';
    ctx.fillStyle = '#00a651';
    ctx.textAlign = 'left';
    ctx.fillText(`BOX: ${totalW.toFixed(1)}cm √ó ${totalH.toFixed(1)}cm`, 20, 30);

    ctx.fillStyle = '#666';
    ctx.fillText(`ARTWORK: ${artworkWidth}cm √ó ${artworkHeight}cm`, 20, 50);

    if (gap > 0) {
      ctx.fillStyle = '#666';
      ctx.fillText(`GAP: ${gap}cm`, 20, 70);
    }

    // Draw dimension lines
    if (gap > 0) {
      ctx.strokeStyle = '#00a651';
      ctx.lineWidth = 1;
      ctx.setLineDash([3, 3]);

      // Horizontal gap indicator
      const arrowY = cy - sh / 2 - sg - 20;
      ctx.beginPath();
      ctx.moveTo(cx - sw / 2 - sg, arrowY);
      ctx.lineTo(cx - sw / 2, arrowY);
      ctx.stroke();

      // Arrow heads
      ctx.fillStyle = '#00a651';
      ctx.beginPath();
      ctx.moveTo(cx - sw / 2 - sg, arrowY);
      ctx.lineTo(cx - sw / 2 - sg + 5, arrowY - 3);
      ctx.lineTo(cx - sw / 2 - sg + 5, arrowY + 3);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(cx - sw / 2, arrowY);
      ctx.lineTo(cx - sw / 2 - 5, arrowY - 3);
      ctx.lineTo(cx - sw / 2 - 5, arrowY + 3);
      ctx.fill();

      // Gap label
      ctx.fillStyle = '#00a651';
      ctx.font = 'bold 10px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(`${gap}cm`, cx - sw / 2 - sg / 2, arrowY - 8);
    }
  }, [artworkWidth, artworkHeight, gap]);

  return (
    <div className="bg-gradient-to-br from-gray-100 to-gray-50 rounded-2xl mb-6 border border-gray-200">
      <canvas ref={canvasRef} className="w-full h-[250px]" />
    </div>
  );
}


// ==========================================
// FILE: /components/ContactPage.tsx
// ==========================================

import { useState } from 'react';

export default function ContactPage() {
  const [message, setMessage] = useState('');

  const handleSendEmail = () => {
    if (message.trim()) {
      window.location.href = `mailto:studio@arkpak.hk?subject=Inquiry&body=${encodeURIComponent(message)}`;
    }
  };

  return (
    <section className="py-12 md:py-20 animate-in fade-in duration-500">
      <div className="container max-w-4xl mx-auto px-6">
        <div className="bg-gray-50 rounded-3xl p-8 md:p-12 border-2 border-gray-200 shadow-lg">
          <h3 className="text-3xl font-bold mb-6 pb-4 border-b-2 border-gray-300">
            Contact Us
          </h3>

          <p className="text-gray-600 leading-relaxed mb-8">
            ARK_PAK_ is a dedicated archival housing studio based in Hong Kong. We work with
            galleries, museums, and private collectors.
          </p>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
            {/* Contact Info */}
            <div className="space-y-6">
              <div>
                <div className="text-xs font-bold uppercase text-[#00a651] tracking-wider mb-2">
                  Studio WhatsApp
                </div>
                <a
                  href="https://wa.me/85255962339"
                  className="text-lg font-semibold text-gray-800 hover:text-[#00a651] transition-colors"
                >
                  +852 5596 2339
                </a>
              </div>

              <div>
                <div className="text-xs font-bold uppercase text-[#00a651] tracking-wider mb-2">
                  Email Inquiries
                </div>
                <a
                  href="mailto:studio@arkpak.hk"
                  className="text-lg font-semibold text-gray-800 hover:text-[#00a651] transition-colors"
                >
                  studio@arkpak.hk
                </a>
              </div>

              <div>
                <div className="text-xs font-bold uppercase text-[#00a651] tracking-wider mb-2">
                  Service Area
                </div>
                <p className="text-base font-semibold text-gray-800">
                  Hong Kong Island, Kowloon, New Territories
                </p>
              </div>
            </div>

            {/* Quick Message Form */}
            <div>
              <label className="block text-xs font-bold uppercase text-gray-600 tracking-wide mb-3">
                Send a quick message
              </label>
              <textarea
                value={message}
                onChange={(e) => setMessage(e.target.value)}
                placeholder="How can we help?"
                rows={6}
                className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:border-[#00a651] focus:ring-2 focus:ring-[#00a651]/20 outline-none transition-all resize-none"
              />
              <button
                onClick={handleSendEmail}
                className="w-full mt-4 bg-[#00a651] text-white py-3 rounded-full font-bold hover:bg-[#008f46] transition-colors"
              >
                Send Email
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}


// ==========================================
// FILE: /styles/globals.css
// ==========================================

@import 'tailwindcss';

@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');

* {
  box-sizing: border-box;
}

body {
  font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
  padding: 0;
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Custom animations */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-in {
  animation: fade-in 0.4s ease-out;
}

/* Line clamp utility */
.line-clamp-6 {
  display: -webkit-box;
  -webkit-line-clamp: 6;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Focus visible improvements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid #00a651;
  outline-offset: 2px;
}

/* Hide number input spinners in Chrome, Safari, Edge */
input[type='number']::-webkit-inner-spin-button,
input[type='number']::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Hide number input spinners in Firefox */
input[type='number'] {
  -moz-appearance: textfield;
}

/* Improve button active state */
button:active {
  transform: scale(0.98);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Border-3 utility */
.border-3 {
  border-width: 3px;
}
